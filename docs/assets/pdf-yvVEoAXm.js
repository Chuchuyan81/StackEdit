import{_ as i}from"./index-CPU1aVCC.js";async function p(){const n=[()=>i(()=>import("./pdf-BnPRJEQ6.js"),[]),()=>i(()=>import("./pdf-BnPRJEQ6.js"),[]),()=>i(()=>import("./pdf-DfaD4CCm.js"),[])];let t=null;for(const o of n)try{const r=await o(),e=(r==null?void 0:r.default)??r;if(e!=null&&e.getDocument)return e}catch(r){t=r}throw t||new Error("Не удалось загрузить pdfjs-dist")}async function d(n){try{const t=await i(()=>import("./pdf.worker.min-qSimwDIf.js"),[]),o=(t==null?void 0:t.default)??t;if(n!=null&&n.GlobalWorkerOptions&&typeof o=="function"){n.GlobalWorkerOptions.workerPort=new o;return}}catch{}try{const t=await i(()=>import("./pdf.worker.min-0rVcENtE.js"),[]),o=(t==null?void 0:t.default)??t;n!=null&&n.GlobalWorkerOptions&&o&&(n.GlobalWorkerOptions.workerSrc=o)}catch{}}function l(n){const t=[];let o=[];const r=()=>{o.length!==0&&(t.push(o.join(" ")),o=[])};for(const e of n){const c=String(e??"").trim();if(c===""){r(),t.push("");continue}if(/^(\d+[\.|\)]\s+|[-*•]\s+)/.test(c)){r(),t.push(c.replace(/^•\s+/,"- "));continue}o.push(c)}return r(),t.join(`
`)}async function m(n){const t=await p();await d(t);const o=t.getDocument({data:n}),r=o.promise?await o.promise:await o,e=[];for(let u=1;u<=r.numPages;u+=1){const _=await(await r.getPage(u)).getTextContent({normalizeWhitespace:!0});let s="";for(const a of _.items){const f=(a==null?void 0:a.str)??"";f&&(s+=(s?" ":"")+f,a!=null&&a.hasEOL&&(e.push(s),s=""))}s&&e.push(s),e.push("")}return l(e).trim()}export{m as convertPdfArrayBufferToMarkdown};
