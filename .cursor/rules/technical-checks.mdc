---
description: Технические стандарты для CI/CD, управления зависимостями и работы с терминалом. Предотвращает ошибки конфигурации pnpm и потерю импортов.
globs: ["**/*.{yml,json,js,jsx}"]
alwaysApply: true
---

## CI/CD и GitHub Actions (pnpm)

- **Порядок шагов**: При использовании кеширования в GitHub Actions (`actions/setup-node` с `cache: 'pnpm'`), шаг `pnpm/action-setup` ОБЯЗАТЕЛЬНО должен идти ПЕРЕД `actions/setup-node`.
- **Версионность**: Избегай дублирования версий `pnpm`. Если версия зафиксирована в YAML-файлах (`version: 10.4.1`), убедись, что в `package.json` отсутствует конфликтующее поле `packageManager`, либо они строго синхронизированы. В этом проекте предпочтение отдается фиксации версии в YAML.

## Управление зависимостями

- **Проверка импортов**: При внедрении новых библиотек или расширений (например, плагинов CodeMirror), всегда проверяй, что все используемые пакеты (включая саб-пакеты типа `@codemirror/language-data`) явно добавлены в `dependencies` файла `package.json`.
- **Локальная сборка**: Перед пушем изменений, затрагивающих зависимости или конфигурацию сборки, всегда прогоняй `pnpm build` (или `corepack pnpm build`) локально для проверки целостности Rollup/Vite.

## Работа в терминале (Windows/PowerShell)

- **Синтаксис**: Учитывай, что терминал работает в PowerShell. 
    - Избегай использования `&&` для объединения команд в одном вызове инструмента, если не уверен в поддержке. Используй последовательные вызовы инструментов.
    - Вместо bash-специфичных конструкций (например, `cat <<EOF`) используй стандартные флаги команд или записывай временные файлы.

## Качество сборки

- **Артефакты**: Не коммить папку `docs/` вручную после локальных правок, если только это не требуется явно. Сборкой и обновлением `docs/` для GitHub Pages должен заниматься CI-workflow.
